<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Dashboard</title>
   <style>
       body {
           font-family: Arial, sans-serif;
           margin: 0;
           padding: 20px;
           background-color: rgb(1, 3, 57);
           color: #333;
       }
       .container {
           max-width: 1200px;
           margin: 0 auto;
       }
       .header {
           display: flex;
           justify-content: space-between;
           align-items: center;
           background-color: white;
           border-radius: 10px;
           padding: 10px 20px;
           margin-bottom: 20px;
       }
       .logo {
           display: flex;
           align-items: center;
       }
       .logo-icon {
           background-color: #47cbff;
           color: white;
           padding: 2px 6px;
           border-radius: 4px;
           margin-right: 6px;
           font-weight: bold;
           font-size: 14px;
       }
       .logo span {
           color: #333;
           font-weight: bold;
           font-size: 14px;
       }
       .nav-tabs {
           display: flex;
           background-color: #f0f0f0;
           border-radius: 8px;
           overflow: hidden;
           margin: 0 20px;
       }
       .nav-tabs button {
           background-color: transparent;
           border: none;
           color: #333;
           padding: 8px 16px;
           cursor: pointer;
           font-size: 14px;
           font-weight: 500;
           transition: background-color 0.3s;
       }
       .nav-tabs button.active {
           background-color: rgb(1, 3, 57);
           color: white;
       }
       .header-buttons {
           display: flex;
       }
       .header-buttons button {
           background-color: rgb(1, 3, 57);
           border: none;
           color: white;
           padding: 8px 16px;
           margin-left: 10px;
           cursor: pointer;
           border-radius: 8px;
           font-size: 14px;
           font-weight: 500;
       }
       .dashboard {
           display: flex;
           gap: 20px;
           height: calc(100vh - 140px);
       }
       .left-column, .right-column {
           display: flex;
           flex-direction: column;
       }
       .left-column {
           flex: 0 0 35%;
       }
       .right-column {
           flex: 1;
       }
       .card {
           background-color: white;
           border-radius: 10px;
           padding: 20px;
           box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
           display: flex;
           flex-direction: column;
       }
       .company-score, .top-performers {
           flex: 1;
       }
       .company-score {
           margin-bottom: 20px;
       }
       .performance-insights {
           flex: 1;
       }
       .card h2 {
           margin-top: 0;
           color: #333;
           font-size: 18px;
           margin-bottom: 20px;
       }
       .score-container {
           position: relative;
           width: 200px;
           margin: 0 auto;
       }
       .score-content {
           position: absolute;
           bottom: 0;
           width: 100%;
           text-align: center;
       }
       .score {
           font-size: 48px;
           font-weight: bold;
           color: #333;
       }
       .score-label {
           font-size: 18px;
           color: #666;
       }
       .weekly-change {
           display: flex;
           align-items: center;
           justify-content: space-between;
           margin-top: 55px;
       }
       .change-label {
           display: flex;
           align-items: center;
       }
       .change-icon {
           width: 5px;
           border-radius: 5px;
           height: 30px;
           background-color: #f44336;
           margin-right: 10px;
       }
       .change-value {
           color: #333;
           font-weight: bold;
       }
       .performance-chart {
        flex: 1;
        min-height: 300px;
        margin-bottom: 20px;
        }
        .chart-container {
            width: 100%;
            height: 300px;
        }
        .axis {
            stroke: #888;
            stroke-width: 1;
        }
        .axis-label {
            fill: #888;
            font-size: 12px;
        }
        .data-line {
            fill: none;
            stroke-width: 2;
        }
        .data-point {
            fill: #fff;
            stroke-width: 2;
        }
        .line1 {
            stroke: #4a90e2;
        }
        .line2 {
            stroke: #e24a8d;
        }
       .insights table {
           width: 100%;
           border-collapse: collapse;
       }
       .insights th, .insights td {
           text-align: left;
           padding: 10px;
           border-bottom: 1px solid #f0f0f0;
       }
       .insights th {
           color: #888;
           font-weight: normal;
       }
       .green-bar, .yellow-bar, .golden-bar, .silver-bar, .bronze-bar {
           display: inline-block;
           border-radius: 5px;
           width: 5px;
           height: 30px;
           margin-right: 10px;
           vertical-align: middle;
       }
       .green-bar {
           background-color: #4caf50;
       }
       .yellow-bar {
           background-color: #d8c515;
       }
       .golden-bar {
           background-color: gold;
       }

       .silver-bar {
           background-color: silver;
       }
       .bronze-bar {
           background-color: #CD7F32;
       }
       .change-up {
           color: #4caf50;
           font-weight: bold;
       }
       .change-down {
           color: #d8c515;
           font-weight: bold;
       }
       .performer {
           display: flex;
           align-items: center;
           margin-bottom: 10px;
           border-bottom: 1px solid #f0f0f0;
           padding: 10px 0;
       }
       .performer:last-child {
           border-bottom: none;
       }
       .performer img {
           width: 40px;
           height: 40px;
           border-radius: 50%;
           margin-right: 10px;
       }
       .performer-name {
           flex-grow: 1;
           color: #333;
       }
       .performer-xp {
           font-weight: bold;
           color: #333;
       }
       .more-performers {
           background-color: rgb(1, 3, 57);
           color: white;
           border: none;
           padding: 10px;
           width: 100%;
           text-align: center;
           cursor: pointer;
           border-radius: 5px;
           margin-top: auto;
       }
       .preloader {
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           background-color: rgb(1, 3, 57);
           display: flex;
           justify-content: center;
           align-items: center;
           z-index: 9999;
           transition: opacity 0.5s ease-out;
       }
       .preloader.fade-out {
           opacity: 0;
       }
       .spinner {
           width: 50px;
           height: 50px;
           border: 5px solid #f3f3f3;
           border-top: 5px solid #3498db;
           border-radius: 50%;
           animation: spin 1s linear infinite;
       }
       @keyframes spin {
           0% { transform: rotate(0deg); }
           100% { transform: rotate(360deg); }
       }
       .dashboard {
           opacity: 0;
           transition: opacity 0.5s ease-in;
       }
       .dashboard.fade-in {
           opacity: 1;
       }
       .tab-content {
           display: none;
           width: 100%;
       }
       .tab-content.active {
           display: flex;
           gap: 20px;
       }
   </style>
</head>
<body>
   <div class="preloader">
       <div class="spinner"></div>
   </div>

   <div class="container">
       <header class="header">
           <div class="logo">
               <span class="logo-icon">U</span>
               <span id="username"></span>
           </div>
           <nav class="nav-tabs">
               <button class="active" data-tab="overview">Overview</button>
               <button data-tab="employee">Employee</button>
               <button data-tab="admin">Admin</button>
           </nav>
           <div class="header-buttons">
               <button>Company</button>
               <button>9/2 - 9/6</button>
           </div>
       </header>

       <div class="dashboard">
           <div class="tab-content active" id="overview">
               <div class="left-column">
                   <div class="card company-score">
                       <h2>Company Score</h2>
                       <div class="score-container" style="margin-top: 40px;">
                        <svg width="200" height="120" viewBox="0 0 200 100">
                            <path d="M10 90 A 90 90 0 0 1 190 90" fill="none" stroke="#e0e0e0" stroke-width="20"/>
                            <path d="M10 90 A 90 90 0 0 1 190 90" fill="none" stroke="#4caf50" stroke-width="20" stroke-dasharray="283 283" stroke-dashoffset="39.62"/>
                        </svg>
                        <div class="score-content">
                            <div class="score">86</div>
                            <div class="score-label">Very Good</div>
                        </div>
                    </div>
                    <div class="weekly-change">
                        <div class="change-label">
                            <div class="change-icon"></div>
                            Weekly Change
                        </div>
                        <div class="change-value">↓ 2 points</div>
                    </div>
                   </div>

                   <div class="card top-performers">
                       <h2>Top Performers</h2>
                       <div class="performer">
                           <span class="golden-bar"></span>
                           <img src="../images/RC-Profile-Square.jpg" alt="Paul Graham">
                           <span class="performer-name">Paul Graham</span>
                           <span class="performer-xp">81,660 xp</span>
                       </div>
                       <div class="performer">
                            <span class="silver-bar"></span>
                           <img src="../images/Bechtel_Profile_Square.jpg" alt="Sam Altman">
                           <span class="performer-name">Sam Altman</span>
                           <span class="performer-xp">78,445 xp</span>
                       </div>
                       <div class="performer">
                            <span class="bronze-bar"></span>
                           <img src="../images/images-2.jpeg" alt="Gary Tan">
                           <span class="performer-name">Gary Tan</span>
                           <span class="performer-xp">71,800 xp</span>
                       </div>
                       <button class="more-performers">More Performers...</button>
                   </div>
               </div>

               <div class="right-column">
                   <div class="card performance-insights">
                       <h2>Performance</h2>
                       <div class="performance-chart">
                        <div class="chart-container">
                            <svg width="100%" height="100%" viewBox="0 0 600 300">
                                <!-- X and Y axes -->
                                <line class="axis" x1="50" y1="250" x2="550" y2="250" />
                                <line class="axis" x1="50" y1="250" x2="50" y2="50" />
                                
                                <!-- X-axis labels -->
                                <text class="axis-label" x="50" y="270" text-anchor="middle">8/2</text>
                                <text class="axis-label" x="200" y="270" text-anchor="middle">8/9</text>
                                <text class="axis-label" x="350" y="270" text-anchor="middle">8/16</text>
                                <text class="axis-label" x="500" y="270" text-anchor="middle">8/23</text>
                                
                                <!-- Y-axis labels -->
                                <text class="axis-label" x="40" y="250" text-anchor="end">0</text>
                                <text class="axis-label" x="40" y="190" text-anchor="end">500K</text>
                                <text class="axis-label" x="40" y="130" text-anchor="end">1M</text>
                                <text class="axis-label" x="40" y="70" text-anchor="end">1.5M</text>
                                
                                <!-- Data lines -->
                                <path class="data-line line1" d="M50,200 L200,150 L350,180 L500,100" />
                                <path class="data-line line2" d="M50,180 L200,220 L350,120 L500,170" />
                                
                                <!-- Data points -->
                                <circle class="data-point line1" cx="50" cy="200" r="4" />
                                <circle class="data-point line1" cx="200" cy="150" r="4" />
                                <circle class="data-point line1" cx="350" cy="180" r="4" />
                                <circle class="data-point line1" cx="500" cy="100" r="4" />
                                
                                <circle class="data-point line2" cx="50" cy="180" r="4" />
                                <circle class="data-point line2" cx="200" cy="220" r="4" />
                                <circle class="data-point line2" cx="350" cy="120" r="4" />
                                <circle class="data-point line2" cx="500" cy="170" r="4" />
                            </svg>
                        </div>
                    </div>
                       <h2>Insights</h2>
                       <div class="insights">
                           <table>
                               <tr>
                                   <th></th>
                                   <th>This Week</th>
                                   <th>Last Week</th>
                                   <th>Change</th>
                               </tr>
                               <tr>
                                   <td><span class="green-bar"></span>Total Sales</td>
                                   <td>$7,680</td>
                                   <td>$5,771</td>
                                   <td class="change-up">↑ 13.1%</td>
                               </tr>
                               <tr>
                                   <td><span class="green-bar"></span>Total XP</td>
                                   <td>96,425</td>
                                   <td>100</td>
                                   <td class="change-up">↑ 21.0%</td>
                               </tr>
                               <tr>
                                   <td><span class="yellow-bar"></span>Employee Growth</td>
                                   <td>0.1%</td>
                                   <td>0.3%</td>
                                   <td class="change-down">↓ 66.6%</td>
                               </tr>
                           </table>
                       </div>
                   </div>
               </div>
           </div>

           <div class="tab-content" id="employee">
                <div class="left-column">
                    <div class="card company-score">
                        <h2>Employee Score</h2>
                        <div class="score-container">
                            <div class="score-circle">
                                <div class="score-fill"></div>
                                <div class="score">37</div>
                            </div>
                            <div class="score-info">
                                <div class="score-label">Very Good</div>
                                <div class="weekly-change">
                                    <span class="change-icon">↓</span>
                                    <span>2.3%</span>
                                </div>
                            </div>
                        </div>
                    </div>
 
                    <div class="card top-performers">
                        <h2>Employees</h2>
                        <div class="performer">
                            <img src="/api/placeholder/40/40" alt="Paul Graham">
                            <span class="performer-name">Paul Graham</span>
                            <span class="performer-xp">81,660 xp</span>
                        </div>
                        <div class="performer">
                            <img src="/api/placeholder/40/40" alt="Sam Altman">
                            <span class="performer-name">Sam Altman</span>
                            <span class="performer-xp">78,445 xp</span>
                        </div>
                        <div class="performer">
                            <img src="/api/placeholder/40/40" alt="Gary Tan">
                            <span class="performer-name">Gary Tan</span>
                            <span class="performer-xp">71,800 xp</span>
                        </div>
                        <div class="performer">
                            <img src="/api/placeholder/40/40" alt="Gary Tan">
                            <span class="performer-name">Dalton Caldwell</span>
                            <span class="performer-xp">71,800 xp</span>
                        </div>
                        <button class="more-performers">More Performers...</button>
                    </div>
                </div>
 
                <div class="right-column">
                    <div class="card performance-insights">
                        <h2>Performance</h2>
                        <div class="performance-chart"></div>
                        <h2>Insights</h2>
                        <div class="insights">
                            <table>
                                <tr>
                                    <th></th>
                                    <th>This Week</th>
                                    <th>Last Week</th>
                                    <th>Change</th>
                                </tr>
                                <tr>
                                    <td><span class="green-bar"></span>Total Tasks</td>
                                    <td>$7,680</td>
                                    <td>$5,771</td>
                                    <td class="change-up">↑ 13.1%</td>
                                </tr>
                                <tr>
                                    <td><span class="green-bar"></span>Avg Task Value</td>
                                    <td>96,425</td>
                                    <td>100</td>
                                    <td class="change-up">↑ 21.0%</td>
                                </tr>
                                <tr>
                                    <td><span class="yellow-bar"></span>Employee Growth</td>
                                    <td>0.1%</td>
                                    <td>0.3%</td>
                                    <td class="change-down">↓ 66.6%</td>
                                </tr>
                            </table>
                        </div>
                </div>
            </div>
           </div>

           <div class="tab-content" id="admin">
               <div class="card" style="width: 100%;">
                   <h2>Admin Tab Content</h2>
                   <p>This is where admin-specific content would go.</p>
               </div>
           </div>
       </div>
   </div>

   <script>
       // Preloader script
       window.addEventListener('load', function() {
           setTimeout(function() {
               document.querySelector('.preloader').classList.add('fade-out');
               document.querySelector('.dashboard').classList.add('fade-in');
               setTimeout(function() {
                   document.querySelector('.preloader').style.display = 'none';
               }, 500);
           }, 2000); // Simulating loading time
       });

       // Tab switching functionality
       document.querySelectorAll('.nav-tabs button').forEach(button => {
           button.addEventListener('click', () => {
               // Remove active class from all buttons and tab contents
               document.querySelectorAll('.nav-tabs button').forEach(btn => btn.classList.remove('active'));
               document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

               // Add active class to clicked button and corresponding tab content
               button.classList.add('active');
               document.getElementById(button.getAttribute('data-tab')).classList.add('active');
           });
       });
   </script>
       <script>
        document.addEventListener("DOMContentLoaded", function() {
            const token = localStorage.getItem('idToken');
            if (token) {
                const decodedToken = parseJwt(token);
                const username = decodedToken['cognito:username']; // Adjust this based on your token claims
                document.getElementById('username').textContent = username;
            } else {
                window.location.href = 'login.html';  // Redirect to login if no token is found
            }
        });

        function parseJwt(token) {
            const base64Url = token.split('.')[1];
            const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
            const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
                return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
            }).join(''));
            return JSON.parse(jsonPayload);
        }
    </script>
</body>
</html>